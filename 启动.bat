@echo off
chcp 65001 >nul
setlocal EnableDelayedExpansion

:: ============================================
:: ðŸŽ¬ Smart Video Clipper - å¯åŠ¨è„šæœ¬
:: ============================================

title Smart Video Clipper - å¯åŠ¨ä¸­...

cd /d "%~dp0"

echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘            ðŸŽ¬ Smart Video Clipper å¯åŠ¨ä¸­...                   â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

:: æ£€æŸ¥è™šæ‹ŸçŽ¯å¢ƒ
if not exist "venv\Scripts\activate.bat" (
    echo âŒ æœªæ‰¾åˆ°è™šæ‹ŸçŽ¯å¢ƒï¼Œè¯·å…ˆè¿è¡Œ æ™ºèƒ½å®‰è£….bat
    echo.
    pause
    exit /b 1
)

:: æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
echo [1/3] æ¿€æ´»PythonçŽ¯å¢ƒ...
call venv\Scripts\activate.bat

:: æ£€æŸ¥OllamaæœåŠ¡
echo [2/3] æ£€æŸ¥OllamaæœåŠ¡...
tasklist /FI "IMAGENAME eq ollama.exe" 2>nul | find /I "ollama.exe" >nul
if %errorLevel% neq 0 (
    echo      å¯åŠ¨OllamaæœåŠ¡...
    start /B "" ollama serve >nul 2>&1
    timeout /t 2 /nobreak >nul
)
echo      OllamaæœåŠ¡: âœ…

:: å¯åŠ¨ä¸»ç¨‹åº
echo [3/3] å¯åŠ¨Webç•Œé¢...
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  ðŸŒ Webç•Œé¢å°†åœ¨æµè§ˆå™¨ä¸­è‡ªåŠ¨æ‰“å¼€
echo  ðŸ“ å¦‚æœªè‡ªåŠ¨æ‰“å¼€ï¼Œè¯·æ‰‹åŠ¨è®¿é—®: http://127.0.0.1:7860
echo  ðŸ›‘ å…³é—­æ­¤çª—å£å°†åœæ­¢ç¨‹åº
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

python -m app.gradio_ui

echo.
echo ç¨‹åºå·²é€€å‡ºï¼ŒæŒ‰ä»»æ„é”®å…³é—­çª—å£...
pause >nul

